<map version="freeplane 1.11.1">
<!--To view this file, download free mind mapping software Freeplane from https://www.freeplane.org -->
<node TEXT="LEMP" LOCALIZED_STYLE_REF="AutomaticLayout.level.root" FOLDED="false" ID="ID_1090958577" CREATED="1409300609620" MODIFIED="1682444355788"><hook NAME="MapStyle" background="#2e3440" zoom="1.5">
    <properties show_icon_for_attributes="true" edgeColorConfiguration="#808080ff,#ff0000ff,#0000ffff,#00ff00ff,#ff00ffff,#00ffffff,#7c0000ff,#00007cff,#007c00ff,#7c007cff,#007c7cff,#7c7c00ff" show_note_icons="true" associatedTemplateLocation="template:/dark_nord_template.mm" fit_to_viewport="false"/>

<map_styles>
<stylenode LOCALIZED_TEXT="styles.root_node" STYLE="oval" UNIFORM_SHAPE="true" VGAP_QUANTITY="24 pt">
<font SIZE="24"/>
<stylenode LOCALIZED_TEXT="styles.predefined" POSITION="bottom_or_right" STYLE="bubble">
<stylenode LOCALIZED_TEXT="default" ID="ID_671184412" ICON_SIZE="12 pt" FORMAT_AS_HYPERLINK="false" COLOR="#484747" BACKGROUND_COLOR="#eceff4" STYLE="bubble" SHAPE_HORIZONTAL_MARGIN="8 pt" SHAPE_VERTICAL_MARGIN="5 pt" BORDER_WIDTH_LIKE_EDGE="false" BORDER_WIDTH="1.9 px" BORDER_COLOR_LIKE_EDGE="true" BORDER_COLOR="#f0f0f0" BORDER_DASH_LIKE_EDGE="true" BORDER_DASH="SOLID">
<arrowlink SHAPE="CUBIC_CURVE" COLOR="#88c0d0" WIDTH="2" TRANSPARENCY="255" DASH="" FONT_SIZE="9" FONT_FAMILY="SansSerif" DESTINATION="ID_671184412" STARTARROW="NONE" ENDARROW="DEFAULT"/>
<font NAME="SansSerif" SIZE="11" BOLD="false" STRIKETHROUGH="false" ITALIC="false"/>
<edge STYLE="bezier" COLOR="#81a1c1" WIDTH="3" DASH="SOLID"/>
<richcontent CONTENT-TYPE="plain/auto" TYPE="DETAILS"/>
<richcontent TYPE="NOTE" CONTENT-TYPE="plain/auto"/>
</stylenode>
<stylenode LOCALIZED_TEXT="defaultstyle.details" BORDER_WIDTH="1.9 px">
<edge STYLE="bezier" COLOR="#81a1c1" WIDTH="3"/>
</stylenode>
<stylenode LOCALIZED_TEXT="defaultstyle.attributes">
<font SIZE="10"/>
</stylenode>
<stylenode LOCALIZED_TEXT="defaultstyle.note" COLOR="#000000" BACKGROUND_COLOR="#ebcb8b">
<icon BUILTIN="clock2"/>
<font SIZE="10"/>
</stylenode>
<stylenode LOCALIZED_TEXT="defaultstyle.floating" COLOR="#484747">
<edge STYLE="hide_edge"/>
<cloud COLOR="#f0f0f0" SHAPE="ROUND_RECT"/>
</stylenode>
<stylenode LOCALIZED_TEXT="defaultstyle.selection" COLOR="#e5e9f0" BACKGROUND_COLOR="#5e81ac" BORDER_COLOR_LIKE_EDGE="false" BORDER_COLOR="#5e81ac"/>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.user-defined" POSITION="bottom_or_right" STYLE="bubble">
<stylenode LOCALIZED_TEXT="styles.important" ID="ID_779275544" BORDER_COLOR_LIKE_EDGE="false" BORDER_COLOR="#bf616a">
<icon BUILTIN="yes"/>
<arrowlink COLOR="#bf616a" TRANSPARENCY="255" DESTINATION="ID_779275544"/>
<font SIZE="14"/>
</stylenode>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.AutomaticLayout" POSITION="bottom_or_right" STYLE="bubble">
<stylenode LOCALIZED_TEXT="AutomaticLayout.level.root" COLOR="#ffffff" BACKGROUND_COLOR="#484747" STYLE="bubble" SHAPE_HORIZONTAL_MARGIN="10 pt" SHAPE_VERTICAL_MARGIN="10 pt">
<font NAME="Ubuntu" SIZE="18"/>
</stylenode>
<stylenode LOCALIZED_TEXT="AutomaticLayout.level,1" COLOR="#eceff4" BACKGROUND_COLOR="#d08770" STYLE="bubble" SHAPE_HORIZONTAL_MARGIN="8 pt" SHAPE_VERTICAL_MARGIN="5 pt">
<font NAME="Ubuntu" SIZE="16"/>
</stylenode>
<stylenode LOCALIZED_TEXT="AutomaticLayout.level,2" COLOR="#3b4252" BACKGROUND_COLOR="#ebcb8b">
<font SIZE="14"/>
</stylenode>
<stylenode LOCALIZED_TEXT="AutomaticLayout.level,3" COLOR="#2e3440" BACKGROUND_COLOR="#a3be8c">
<font SIZE="12"/>
</stylenode>
<stylenode LOCALIZED_TEXT="AutomaticLayout.level,4" COLOR="#2e3440" BACKGROUND_COLOR="#b48ead">
<font SIZE="11"/>
</stylenode>
<stylenode LOCALIZED_TEXT="AutomaticLayout.level,5" BACKGROUND_COLOR="#81a1c1">
<font SIZE="10"/>
</stylenode>
<stylenode LOCALIZED_TEXT="AutomaticLayout.level,6" BACKGROUND_COLOR="#88c0d0">
<font SIZE="10"/>
</stylenode>
<stylenode LOCALIZED_TEXT="AutomaticLayout.level,7" BACKGROUND_COLOR="#8fbcbb">
<font SIZE="10"/>
</stylenode>
<stylenode LOCALIZED_TEXT="AutomaticLayout.level,8" BACKGROUND_COLOR="#d8dee9">
<font SIZE="10"/>
</stylenode>
<stylenode LOCALIZED_TEXT="AutomaticLayout.level,9" BACKGROUND_COLOR="#e5e9f0">
<font SIZE="9"/>
</stylenode>
<stylenode LOCALIZED_TEXT="AutomaticLayout.level,10" BACKGROUND_COLOR="#eceff4">
<font SIZE="9"/>
</stylenode>
</stylenode>
</stylenode>
</map_styles>
</hook>
<hook NAME="accessories/plugins/AutomaticLayout.properties" VALUE="ALL"/>
<font BOLD="true"/>
<richcontent CONTENT-TYPE="xml/" TYPE="DETAILS">
<html>
  <head>
    
  </head>
  <body>
    <p>
      Ubuntu 22.04
    </p>
  </body>
</html>
</richcontent>
<node TEXT="Nginx, MySQL, PHP8.1" POSITION="bottom_or_right" ID="ID_217308388" CREATED="1681591434605" MODIFIED="1681591472200">
<node TEXT="Ссылка на статью по настройке Nginx, MySQL, PHP8.1" POSITION="bottom_or_right" ID="ID_1372297501" CREATED="1681559849740" MODIFIED="1681674078942" COLOR="#ffffff" BACKGROUND_COLOR="#0066ff">
<node TEXT="https://dnevnik.dev/2022/07/11/ustanovka-nginx-mysql-8-php8-1-fpm-na-ubuntu-22-04-lts-s-nulya/" POSITION="bottom_or_right" ID="ID_1302847321" CREATED="1681559838084" MODIFIED="1681674088964" LINK="https://dnevnik.dev/2022/07/11/ustanovka-nginx-mysql-8-php8-1-fpm-na-ubuntu-22-04-lts-s-nulya/" COLOR="#ffffff" BACKGROUND_COLOR="#0066ff"/>
</node>
<node TEXT="Nginx. Установка:" POSITION="bottom_or_right" ID="ID_185480665" CREATED="1681550765797" MODIFIED="1681674273540" BACKGROUND_COLOR="#00cc33"><richcontent CONTENT-TYPE="xml/" TYPE="DETAILS">
<html>
  <head>
    
  </head>
  <body>
    <p>
      Лучше установить последнюю версию. См. слева
    </p>
  </body>
</html></richcontent>
<node TEXT="sudo apt update" ID="ID_245900564" CREATED="1681551101649" MODIFIED="1681551104803"/>
<node TEXT="sudo apt upgrade" ID="ID_1129532974" CREATED="1681551107729" MODIFIED="1681551117757"/>
<node TEXT="sudo apt install nginx -y" ID="ID_194392626" CREATED="1681551118728" MODIFIED="1681674118593"/>
</node>
<node TEXT="UFW. Проверить настройки файрволла UFW:" FOLDED="true" POSITION="bottom_or_right" ID="ID_1775329510" CREATED="1681551171799" MODIFIED="1681552648608">
<node TEXT="Вывод доступных приложений" ID="ID_357785805" CREATED="1681551230636" MODIFIED="1681551388602">
<node TEXT="sudo ufw app list" ID="ID_1366276601" CREATED="1681551393353" MODIFIED="1681551397294">
<node TEXT="Available applications:&#xa;  Nginx Full&#xa;  Nginx HTTP&#xa;  Nginx HTTPS&#xa;  OpenSSH" POSITION="bottom_or_right" ID="ID_1319375845" CREATED="1681551252163" MODIFIED="1681551255607"/>
</node>
</node>
<node TEXT="Проверим, разрешены ли эти приложения в файрволле" ID="ID_1961230571" CREATED="1681551308930" MODIFIED="1681551333984">
<node TEXT="sudo ufw status" FOLDED="true" ID="ID_1625099614" CREATED="1681551406845" MODIFIED="1681551423633">
<node ID="ID_58867002" CREATED="1681551441749" MODIFIED="1681551674452"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      <font size="4">Status: active To Action From </font>
    </p>
    <p>
      <font size="4">&#xa0;--&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;------&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;---- </font>
    </p>
    <p>
      <font size="4">Nginx HTTP&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;ALLOW Anywhere </font>
    </p>
    <p>
      <font size="4">Nginx HTTPS&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;ALLOW Anywhere </font>
    </p>
    <p>
      <font size="4">OpenSSH&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;ALLOW Anywhere </font>
    </p>
    <p>
      <font size="4">Nginx HTTP (v6)&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;ALLOW Anywhere (v6) </font>
    </p>
    <p>
      <font size="4">Nginx HTTPS (v6)&#xa0;&#xa0;&#xa0;ALLOW Anywhere (v6) </font>
    </p>
    <p>
      <font size="4">OpenSSH (v6)&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;ALLOW Anywhere (v6)</font>
    </p>
  </body>
</html>
</richcontent>
<font SIZE="12"/>
</node>
</node>
</node>
<node TEXT="Если у кого-то из них значение «DENY», или их просто нет в списке, или список вообще пуст, то нужно выполнить команды:" FOLDED="true" ID="ID_3264920" CREATED="1681551730307" MODIFIED="1681551735959">
<node TEXT="sudo ufw allow &apos;OpenSSH&apos;&#xa;sudo ufw allow &apos;Nginx HTTP&apos;&#xa;sudo ufw allow &apos;Nginx HTTPS&apos;" ID="ID_1972187041" CREATED="1681551748052" MODIFIED="1681551751862"/>
</node>
</node>
<node TEXT="Nginx. Проверка работоспособности Nginx:" POSITION="bottom_or_right" ID="ID_1741628771" CREATED="1681551781419" MODIFIED="1681590346612" BACKGROUND_COLOR="#00cc33">
<node TEXT="Ввести IP-адрес в браузере:" ID="ID_49665284" CREATED="1681552320973" MODIFIED="1681590346612">
<node TEXT="https://dnevnik.dev/wp-content/uploads/2020/11/nginx.png" ID="ID_1492738158" CREATED="1681552381939" MODIFIED="1681552415954" LINK="https://dnevnik.dev/wp-content/uploads/2020/11/nginx.png"/>
</node>
</node>
<node TEXT="MySQL. Установка и Настройка MySQL:" FOLDED="true" POSITION="bottom_or_right" ID="ID_905900890" CREATED="1681552478817" MODIFIED="1681554735358">
<node TEXT="Установка" FOLDED="true" ID="ID_919569163" CREATED="1681554667781" MODIFIED="1681554723147">
<node TEXT="sudo apt install mysql-server" POSITION="bottom_or_right" ID="ID_1815837340" CREATED="1681554620447" MODIFIED="1681554625001"/>
</node>
<node TEXT="Запуск скрипта по настройке параметров безопасности" FOLDED="true" ID="ID_140277751" CREATED="1681554650830" MODIFIED="1681555218020">
<node TEXT="sudo mysql_secure_installation" FOLDED="true" ID="ID_1496720877" CREATED="1681554762603" MODIFIED="1681554765563">
<node TEXT="Во время выполнения скрипта, Вас могут спросить, хотите ли Вы сконфигурировать VALIDATE PASSWORD PLUGIN." FOLDED="true" ID="ID_1311310952" CREATED="1681554810217" MODIFIED="1681554817112">
<node ID="ID_848611757" CREATED="1681555000270" MODIFIED="1681555097339"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      Вот так выглядит предложение сконфигурировать VALIDATE PASSWORD PLUGIN:
    </p>
    <p>
      
    </p>
    <p>
      <font color="#00ffff">VALIDATE PASSWORD PLUGIN can be used to test passwords </font>
    </p>
    <p>
      <font color="#00ffff">and improve security. It checks the strength of password </font>
    </p>
    <p>
      <font color="#00ffff">and allows the users to set only those passwords which are </font>
    </p>
    <p>
      <font color="#00ffff">secure enough. Would you like to setup VALIDATE PASSWORD plugin? </font>
    </p>
    <p>
      
    </p>
    <p>
      <font color="#00ffff">Press y|Y for Yes, any other key for No: </font>
    </p>
    <p>
      <font color="#00ffff">Введите (нажмите) Y, чтобы начать конфигурацию плагина, или что-то другое, чтобы его не конфигурировать.</font>
    </p>
  </body>
</html>
</richcontent>
</node>
<node ID="ID_1445982269" CREATED="1681555132295" MODIFIED="1681555176200"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      Вот так выглядит сообщение о выборе уровня валидации паролей:
    </p>
    <p>
      
    </p>
    <p>
      <font color="#00ffff">There are three levels of password validation policy: </font>
    </p>
    <p>
      
    </p>
    <p>
      <font color="#00ffff">LOW&#xa0;&#xa0;&#xa0;&#xa0;Length &gt;= 8 </font>
    </p>
    <p>
      <font color="#00ffff">MEDIUM Length &gt;= 8, numeric, mixed case, and special characters </font>
    </p>
    <p>
      <font color="#00ffff">STRONG Length &gt;= 8, numeric, mixed case, special characters and dictionary&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;file </font>
    </p>
    <p>
      
    </p>
    <p>
      <font color="#00ffff">Please enter 0 = LOW, 1 = MEDIUM and 2 = STRONG: 1 </font>
    </p>
    <p>
      <font color="#00ffff">Выберите тот уровень, который считаете нужным.</font>
    </p>
  </body>
</html>
</richcontent>
</node>
</node>
</node>
</node>
<node TEXT="Ввод пароля для MySQL-пользователя root:" FOLDED="true" ID="ID_555581102" CREATED="1681555225844" MODIFIED="1681555230551">
<node ID="ID_318614586" CREATED="1681555251451" MODIFIED="1681555417320"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      Если Вы сконфигурировали VALIDATE PASSWORD PLUGIN, Вам будет показана надежность пароля для MySQL-пользователя root,
    </p>
    <p>
      который вы только что ввели, и ваш сервер спросит, хотите ли вы продолжить с этим паролем.
    </p>
    <p>
      Если вас устраивает текущий пароль, введите (нажмите) Y, а затем Enter:
    </p>
    <p>
      
    </p>
    <p>
      <font color="#00ffff">Estimated strength of the password: 100 </font>
    </p>
    <p>
      <font color="#00ffff">Do you wish to continue with the password provided?(Press y|Y for Yes, any other key for No) : y </font>
    </p>
    <p>
      <font color="#00ffff">На все оставшиеся вопросы отвечайте Y и жмите Enter</font>
    </p>
  </body>
</html>
</richcontent>
</node>
</node>
<node TEXT="Теперь проверим, что мы можем зайти в командную строку MySQL, для этого выполним команду:" FOLDED="true" POSITION="bottom_or_right" ID="ID_691419577" CREATED="1681555506537" MODIFIED="1681555524822">
<node TEXT="sudo mysql" FOLDED="true" ID="ID_562903606" CREATED="1681555526296" MODIFIED="1681556120866">
<node ID="ID_1372660928" CREATED="1681556079073" MODIFIED="1681556120864"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      Эта команда подключит нас к MySQL-серверу под пользователем root. Должно вывестись подобное:
    </p>
    <p>
      
    </p>
    <p>
      <font color="#00ffff">Welcome to the MySQL monitor.&#xa0;&#xa0;Commands end with ; or \g. </font>
    </p>
    <p>
      <font color="#00ffff">Your MySQL connection id is 13 </font>
    </p>
    <p>
      <font color="#00ffff">Server version: 8.0.29-0ubuntu0.22.04.2 (Ubuntu) </font>
    </p>
    <p>
      
    </p>
    <p>
      <font color="#00ffff">Copyright (c) 2000, 2022, Oracle and/or its affiliates. </font>
    </p>
    <p>
      
    </p>
    <p>
      <font color="#00ffff">Oracle is a registered trademark of Oracle Corporation and/or its </font>
    </p>
    <p>
      <font color="#00ffff">affiliates. Other names may be trademarks of their respective </font>
    </p>
    <p>
      <font color="#00ffff">owners. </font>
    </p>
    <p>
      
    </p>
    <p>
      <font color="#00ffff">Type 'help;' or '\h' for help. Type '\c' to clear the current input statement. </font>
    </p>
    <p>
      
    </p>
    <p>
      <font color="#00ffff">mysql&gt;</font>
    </p>
  </body>
</html>
</richcontent>
</node>
</node>
</node>
<node TEXT="Чтобы выйти из консоли, введите:" FOLDED="true" POSITION="bottom_or_right" ID="ID_64633952" CREATED="1681556153887" MODIFIED="1681556173055">
<node TEXT="exit" FOLDED="true" ID="ID_1752581689" CREATED="1681556175764" MODIFIED="1681556184341">
<node ID="ID_1304942875" CREATED="1681556185676" MODIFIED="1681556208675"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      После чего выведется дружелюбное сообщение:
    </p>
    <p>
      
    </p>
    <p>
      <font color="#00ffff">mysql&gt; exit </font>
    </p>
    <p>
      <font color="#00ffff">Bye</font>
    </p>
  </body>
</html>
</richcontent>
</node>
</node>
</node>
<node TEXT="Обратите внимание, что Вам не нужно было вводить пароль для подключения в качестве пользователя root, даже если вы задали его при запуске сценария mysql_secure_installation. Так произошло, так как для root-пользователя MySQL методом аутентификации по умолчанию является unix_socket (вместо пароля)." FOLDED="true" POSITION="bottom_or_right" ID="ID_237066305" CREATED="1681556292175" MODIFIED="1681556420527">
<node TEXT="Хоть на первый взгляд это и может показаться проблемой безопасности, но это наоборот делает сервер базы данных более безопасным, поскольку единственными пользователями, которым разрешено входить в систему как root-пользователь MySQL, являются системные пользователи с привилегиями sudo, подключающиеся с консоли или через приложение, работающее с теми же привилегиями." FOLDED="true" POSITION="bottom_or_right" ID="ID_676815588" CREATED="1681556347309" MODIFIED="1681556354106">
<node TEXT=" На практике это означает, что вы не сможете использовать MySQL-пользователя root для подключения из вашего PHP-приложения. Установка пароля для учетной записи root в MySQL работает как гарантия на случай, если метод аутентификации по умолчанию будет изменен с unix_socket на пароль." FOLDED="true" POSITION="bottom_or_right" ID="ID_518569944" CREATED="1681556375652" MODIFIED="1681556381297">
<node TEXT="Для повышения безопасности, для каждой базы данных лучше иметь отдельного пользователя, чьи привилегии были бы не более, чем достаточные." ID="ID_1211044622" CREATED="1681556426083" MODIFIED="1681556429325"/>
</node>
</node>
</node>
</node>
<node TEXT="PHP8.1-FPM. Установка PHP8.1-FPM" FOLDED="true" POSITION="bottom_or_right" ID="ID_1745271732" CREATED="1681556526993" MODIFIED="1681556564076">
<node TEXT="Для этого мы должны первым делом добавить репозиторий, а чтобы его добавить, нужно установить software-properties-common, введем:" FOLDED="true" ID="ID_274709875" CREATED="1681556567352" MODIFIED="1681556608147">
<node TEXT="sudo apt install software-properties-common" ID="ID_985984453" CREATED="1681556609927" MODIFIED="1681556621985"/>
</node>
<node TEXT="добавим сам репозиторий с PHP:" FOLDED="true" ID="ID_136900650" CREATED="1681556646870" MODIFIED="1681556650455">
<node TEXT="sudo add-apt-repository ppa:ondrej/php" ID="ID_1245875798" CREATED="1681556650461" MODIFIED="1681556667558"/>
</node>
<node TEXT="Обновимся" FOLDED="true" ID="ID_611729438" CREATED="1681556705789" MODIFIED="1681556720361">
<node TEXT="sudo apt update" POSITION="bottom_or_right" ID="ID_1887123694" CREATED="1681556697085" MODIFIED="1681556699936"/>
</node>
<node TEXT="установим PHP:" FOLDED="true" ID="ID_127718396" CREATED="1681556724885" MODIFIED="1681556742592">
<node TEXT="sudo apt install php8.1-fpm" ID="ID_1353929507" CREATED="1681556743924" MODIFIED="1681556747488"/>
</node>
<node TEXT="проверим, работает ли наш PHP 8.1, введем:" FOLDED="true" ID="ID_1048444622" CREATED="1681556771092" MODIFIED="1681556778167">
<node TEXT="systemctl status php8.1-fpm" ID="ID_393249172" CREATED="1681556780420" MODIFIED="1681556784399"/>
</node>
</node>
<node TEXT="Настройка Nginx для работы с PHP" FOLDED="true" POSITION="bottom_or_right" ID="ID_48648301" CREATED="1681556824443" MODIFIED="1681560050537" BACKGROUND_COLOR="#00cc00">
<node TEXT="Создадим директорию для тестового сайта, с помощью которого мы будем проверять корректность установки:" FOLDED="true" ID="ID_1240684449" CREATED="1681556836899" MODIFIED="1681556879254">
<node TEXT="sudo mkdir /var/www/domain_of_site_for_testing" ID="ID_915904430" CREATED="1681556881394" MODIFIED="1681556884405"/>
</node>
<node TEXT="Назначим текущего пользователя владельцем директории (вы же не из под root, верно?):" FOLDED="true" ID="ID_392511146" CREATED="1681556913912" MODIFIED="1681556920663">
<node TEXT="sudo chown -R $USER:$USER /var/www/domain_of_site_for_testing" ID="ID_456337080" CREATED="1681556922095" MODIFIED="1681556931304"/>
</node>
<node TEXT="Отключим дефолтный файл конфигурации Nginx:" FOLDED="true" ID="ID_329981504" CREATED="1681556951060" MODIFIED="1681556956998">
<node TEXT="sudo rm /etc/nginx/sites-enabled/default" ID="ID_1988573976" CREATED="1681556958347" MODIFIED="1681556961926"/>
</node>
<node TEXT="Создадим новый конфигурационный файл для Nginx, для этого введем:" FOLDED="true" ID="ID_1180517670" CREATED="1681556984152" MODIFIED="1681557478808">
<node TEXT="sudo nano /etc/nginx/sites-available/domain_of_site_for_testing" FOLDED="true" ID="ID_179526218" CREATED="1681556991994" MODIFIED="1681557577415">
<node POSITION="bottom_or_right" ID="ID_1410154425" CREATED="1681557031733" MODIFIED="1681557553286"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      Команда выше создаст новый пустой файл. Вставим в него содержимое:
    </p>
    <p>
      <font color="#00ffff">server { </font>
    </p>
    <p>
      <font color="#00ffff">&#xa0;&#xa0;&#xa0;&#xa0;listen 80 default_server; </font>
    </p>
    <p>
      <font color="#00ffff">&#xa0;&#xa0;&#xa0;&#xa0;server_name domain_of_site_for_testing www.domain_of_site_for_testing; </font>
    </p>
    <p>
      <font color="#00ffff">&#xa0;&#xa0;&#xa0;&#xa0;root /var/www/domain_of_site_for_testing; </font>
    </p>
    <p>
      
    </p>
    <p>
      <font color="#00ffff">&#xa0;&#xa0;&#xa0;&#xa0;index index.html index.htm index.php; </font>
    </p>
    <p>
      
    </p>
    <p>
      <font color="#00ffff">&#xa0;&#xa0;&#xa0;&#xa0;location / { </font>
    </p>
    <p>
      <font color="#00ffff">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;try_files $uri $uri/ =404; </font>
    </p>
    <p>
      <font color="#00ffff">&#xa0;&#xa0;&#xa0;&#xa0;} </font>
    </p>
    <p>
      
    </p>
    <p>
      <font color="#00ffff">&#xa0;&#xa0;&#xa0;&#xa0;location ~ \.php$ { </font>
    </p>
    <p>
      <font color="#00ffff">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;include snippets/fastcgi-php.conf; </font>
    </p>
    <p>
      <font color="#00ffff">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;fastcgi_pass unix:/var/run/php/php8.1-fpm.sock; </font>
    </p>
    <p>
      <font color="#00ffff">&#xa0;&#xa0;&#xa0;&#xa0;} </font>
    </p>
    <p>
      
    </p>
    <p>
      <font color="#00ffff">&#xa0;&#xa0;&#xa0;&#xa0;location ~ /\.ht { </font>
    </p>
    <p>
      <font color="#00ffff">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;deny all; </font>
    </p>
    <p>
      <font color="#00ffff">&#xa0;&#xa0;&#xa0;&#xa0;} </font>
    </p>
    <p>
      
    </p>
    <p>
      <font color="#00ffff">}</font>
    </p>
  </body>
</html>
</richcontent>
</node>
</node>
</node>
<node TEXT="Активируем конфигурацию этой командой:" FOLDED="true" ID="ID_691516479" CREATED="1681557164148" MODIFIED="1681557171654">
<node TEXT="sudo ln -s /etc/nginx/sites-available/domain_of_site_for_testing /etc/nginx/sites-enabled/" ID="ID_1769677480" CREATED="1681557171664" MODIFIED="1681557180024"/>
</node>
<node TEXT="Перезапустим Nginx, чтобы изменения вступили в силу:" FOLDED="true" ID="ID_1581791074" CREATED="1681557205444" MODIFIED="1681557670338">
<node TEXT="sudo systemctl reload nginx" ID="ID_86260614" CREATED="1681557212094" MODIFIED="1681557214246"/>
</node>
<node TEXT="Теперь наш тестовый сайт активен, давайте создадим index.php, чтобы Проверить его работу. Создадим новый файл:" FOLDED="true" ID="ID_848766877" CREATED="1681557218170" MODIFIED="1681557282604">
<node TEXT="nano /var/www/domain_of_site_for_testing/index.php" FOLDED="true" ID="ID_442648399" CREATED="1681557251343" MODIFIED="1681557295541">
<node ID="ID_1084262696" CREATED="1681557345447" MODIFIED="1681557365841"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      И вставим в него это:
    </p>
    <p>
      
    </p>
    <p>
      <font color="#00ffff">&lt;html&gt; </font>
    </p>
    <p>
      <font color="#00ffff">&#xa0;&#xa0;&lt;head&gt; </font>
    </p>
    <p>
      <font color="#00ffff">&#xa0;&#xa0;&#xa0;&#xa0;&lt;title&gt;Site for testing&lt;/title&gt; </font>
    </p>
    <p>
      <font color="#00ffff">&#xa0;&#xa0;&lt;/head&gt; </font>
    </p>
    <p>
      <font color="#00ffff">&#xa0;&#xa0;&lt;body&gt; </font>
    </p>
    <p>
      <font color="#00ffff">&#xa0;&#xa0;&#xa0;&#xa0;&lt;h1&gt;Hello World!&lt;/h1&gt; </font>
    </p>
    <p>
      
    </p>
    <p>
      <font color="#00ffff">&#xa0;&#xa0;&#xa0;&#xa0;&lt;?php </font>
    </p>
    <p>
      <font color="#00ffff">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;phpinfo(); </font>
    </p>
    <p>
      <font color="#00ffff">&#xa0;&#xa0;&#xa0;&#xa0;?&gt; </font>
    </p>
    <p>
      <font color="#00ffff">&#xa0;&#xa0;&lt;/body&gt; </font>
    </p>
    <p>
      <font color="#00ffff">&lt;/html&gt;</font>
    </p>
  </body>
</html>
</richcontent>
</node>
</node>
</node>
<node TEXT="Всё, дело сделано, можем тестировать. Для этого необходимо открыть в браузере страницу:" FOLDED="true" ID="ID_1885745513" CREATED="1681557624659" MODIFIED="1681557632420">
<node TEXT="http://IP-адрес Вашего сервера/" ID="ID_381258203" CREATED="1681557632430" MODIFIED="1681557634987"/>
</node>
</node>
<node TEXT="Настройка работы PHP и MySQL" POSITION="bottom_or_right" ID="ID_698569541" CREATED="1681557674209" MODIFIED="1681560050541" BACKGROUND_COLOR="#00cc00">
<node TEXT="1" OBJECT="java.lang.Long|1" FOLDED="true" ID="ID_370334222" CREATED="1681558050483" MODIFIED="1682444415795">
<node TEXT="Установим PHP-модуль для работы с MySQL:" FOLDED="true" POSITION="bottom_or_right" ID="ID_242764716" CREATED="1681557688049" MODIFIED="1681557716449">
<node TEXT="sudo apt install php8.1-mysql" ID="ID_1533044781" CREATED="1681557716458" MODIFIED="1681557752664"/>
</node>
<node FOLDED="true" POSITION="bottom_or_right" ID="ID_1020004135" CREATED="1681557753539" MODIFIED="1681557753539"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      Войдем в командную строку MySQL:
    </p>
  </body>
</html>
</richcontent>
<node TEXT="sudo mysql" POSITION="bottom_or_right" ID="ID_1026507125" CREATED="1681557742516" MODIFIED="1681557746264"/>
</node>
<node TEXT="Создадим новую базу данных:" FOLDED="true" POSITION="bottom_or_right" ID="ID_797879818" CREATED="1681557769598" MODIFIED="1681557788191">
<node TEXT="CREATE DATABASE site_for_testing_database;" ID="ID_1213638985" CREATED="1681557788197" MODIFIED="1681557791577"/>
</node>
<node TEXT="Создадим нового пользователя:&#xa;&#xa;«aef@234R345t2iJhfvar»— это пароль пользователя site_for_testing_user." FOLDED="true" POSITION="bottom_or_right" ID="ID_669448569" CREATED="1681557793989" MODIFIED="1681557880493">
<node TEXT="CREATE USER &apos;site_for_testing_user&apos;@&apos;localhost&apos; IDENTIFIED BY &apos;aef@234R345t2iJhfvar&apos;;" ID="ID_1409082484" CREATED="1681557822459" MODIFIED="1681557873615"/>
</node>
<node TEXT="Дадим пользователю site_for_testing_user права на базу данных site_for_testing_database:" FOLDED="true" POSITION="bottom_or_right" ID="ID_167790467" CREATED="1681557887866" MODIFIED="1681557912762">
<node TEXT="GRANT ALL ON site_for_testing_database.* TO &apos;site_for_testing_user&apos;@&apos;localhost&apos;;" ID="ID_1171971049" CREATED="1681557912768" MODIFIED="1681557915628"/>
</node>
<node TEXT="Выйдем из командной строки MySQL:" FOLDED="true" POSITION="bottom_or_right" ID="ID_468792763" CREATED="1681557932016" MODIFIED="1681557938448">
<node TEXT="exit" ID="ID_1030800374" CREATED="1681557938453" MODIFIED="1681557943603"/>
</node>
</node>
<node TEXT="Теперь давайте войдем в командную строку MySQL под новым MySQL-пользователем:" FOLDED="true" ID="ID_27872236" CREATED="1681558073203" MODIFIED="1681558137143">
<node TEXT="mysql -u site_for_testing_user -p" FOLDED="true" ID="ID_460343263" CREATED="1681558112898" MODIFIED="1681558185392">
<node TEXT="Вас попросят ввести пароль, введите его. Если Вы не меняли его в примере выше, то он будет такой:&#xa;&#xa;aef@234R345t2iJhfvar" POSITION="bottom_or_right" ID="ID_1642579191" CREATED="1681558197423" MODIFIED="1681558229857"/>
</node>
<node TEXT="Вошли под новым пользователем. Посмотрим, какие базы данных ему видны, введем:" FOLDED="true" ID="ID_333605165" CREATED="1681558244166" MODIFIED="1681558419717">
<node TEXT="SHOW DATABASES;" FOLDED="true" ID="ID_299373744" CREATED="1681558303750" MODIFIED="1681558309039">
<node POSITION="bottom_or_right" ID="ID_1173024069" CREATED="1681558283292" MODIFIED="1681558366347"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      Результат будет такой:
    </p>
    <p>
      
    </p>
    <p>
      <font color="#00ffff">+---------------------------+ </font>
    </p>
    <p>
      <font color="#00ffff">| Database&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;| </font>
    </p>
    <p>
      <font color="#00ffff">+---------------------------+ </font>
    </p>
    <p>
      <font color="#00ffff">| information_schema&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;| </font>
    </p>
    <p>
      <font color="#00ffff">| site_for_testing_database | </font>
    </p>
    <p>
      <font color="#00ffff">+---------------------------+ </font>
    </p>
    <p>
      <font color="#00ffff">2 rows in set (0.06 sec) </font>
    </p>
    <p>
      <font color="#00ffff">Видим нашу базу site_for_testing_database, отлично, давайте добавим в нее таблицу для теста: </font>
    </p>
    <p>
      
    </p>
    <p>
      <font color="#00ffff">CREATE TABLE site_for_testing_database.test_table ( </font>
    </p>
    <p>
      <font color="#00ffff">&#xa0;&#xa0;&#xa0;&#xa0;test_id INT AUTO_INCREMENT, </font>
    </p>
    <p>
      <font color="#00ffff">&#xa0;&#xa0;&#xa0;&#xa0;test_text VARCHAR(255), </font>
    </p>
    <p>
      <font color="#00ffff">&#xa0;&#xa0;&#xa0;&#xa0;PRIMARY KEY(test_id) </font>
    </p>
    <p>
      <font color="#00ffff">); </font>
    </p>
    <p>
      <font color="#00ffff">Вставим в таблицу строчку для теста: </font>
    </p>
    <p>
      
    </p>
    <p>
      <font color="#00ffff">INSERT INTO site_for_testing_database.test_table (test_text) VALUES (&quot;Kak dela u menya est kadilak&quot;); </font>
    </p>
    <p>
      <font color="#00ffff">Проверим, что она записалась: </font>
    </p>
    <p>
      
    </p>
    <p>
      <font color="#00ffff">SELECT * FROM site_for_testing_database.test_table; </font>
    </p>
    <p>
      <font color="#00ffff">Если результат такой, то все получилось: </font>
    </p>
    <p>
      
    </p>
    <p>
      <font color="#00ffff">+---------+------------------------------+ </font>
    </p>
    <p>
      <font color="#00ffff">| test_id | test_text&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;| </font>
    </p>
    <p>
      <font color="#00ffff">+---------+------------------------------+ </font>
    </p>
    <p>
      <font color="#00ffff">|&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;1 | Kak dela u menya est kadilak | </font>
    </p>
    <p>
      <font color="#00ffff">+---------+------------------------------+ </font>
    </p>
    <p>
      <font color="#00ffff">1 rowin set (0.01 sec)</font>
    </p>
  </body>
</html>
</richcontent>
</node>
</node>
</node>
<node TEXT="Выйдем из командной строки MySQL:" FOLDED="true" ID="ID_458784001" CREATED="1681558388704" MODIFIED="1681558392702">
<node TEXT="exit" ID="ID_1904735314" CREATED="1681558394201" MODIFIED="1681558398099"/>
</node>
</node>
<node TEXT="Теперь попробуем добиться вывода данных из таблицы через PHP." FOLDED="true" ID="ID_216117526" CREATED="1681558457486" MODIFIED="1681559474133">
<node TEXT="Для начала создадим файл подключения к базе:" FOLDED="true" POSITION="bottom_or_right" ID="ID_1800509600" CREATED="1681559586253" MODIFIED="1681559600383">
<node TEXT="nano /var/www/domain_of_site_for_testing/connect.php" FOLDED="true" POSITION="bottom_or_right" ID="ID_1163229769" CREATED="1681559304079" MODIFIED="1681559317217">
<node ID="ID_325930652" CREATED="1681559322854" MODIFIED="1681559669204"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      И вставим в него это:
    </p>
    <p>
      
    </p>
    <p>
      <font color="#00ffff">&lt;?php </font>
    </p>
    <p>
      
    </p>
    <p>
      <font color="#00ffff">$db = mysqli_connect('127.0.0.1', 'site_for_testing_user', 'aef@234R345t2iJhfvar', 'site_for_testing_database'); </font>
    </p>
    <p>
      
    </p>
    <p>
      <font color="#00ffff">if (!$db) { </font>
    </p>
    <p>
      <font color="#00ffff">&#xa0;&#xa0;&#xa0;&#xa0;echo 'Ошибка: Невозможно установить соединение с MySQL.' . PHP_EOL; </font>
    </p>
    <p>
      <font color="#00ffff">&#xa0;&#xa0;&#xa0;&#xa0;echo 'Код ошибки errno: ' . mysqli_connect_errno() . PHP_EOL; </font>
    </p>
    <p>
      <font color="#00ffff">&#xa0;&#xa0;&#xa0;&#xa0;echo 'Текст ошибки error: ' . mysqli_connect_error() . PHP_EOL; </font>
    </p>
    <p>
      <font color="#00ffff">&#xa0;&#xa0;&#xa0;&#xa0;exit; </font>
    </p>
    <p>
      <font color="#00ffff">} </font>
    </p>
    <p>
      
    </p>
    <p>
      <font color="#00ffff">echo 'Соединение с MySQL установлено!&lt;br/&gt;'; </font>
    </p>
    <p>
      <font color="#00ffff">echo 'Информация о сервере: ' . mysqli_get_host_info($db) . '&lt;br/&gt;';</font>
    </p>
  </body>
</html>
</richcontent>
</node>
</node>
</node>
<node TEXT="Теперь создаем файл для вывода данных из таблицы:" FOLDED="true" POSITION="bottom_or_right" ID="ID_1521506872" CREATED="1681559517055" MODIFIED="1681559535880">
<node TEXT="nano /var/www/domain_of_site_for_testing/select_from_table_test.php" FOLDED="true" ID="ID_531776894" CREATED="1681559536670" MODIFIED="1681559543378">
<node ID="ID_1328983859" CREATED="1681559626243" MODIFIED="1681559655757"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      <font color="#00ffff">&lt;?php </font>
    </p>
    <p>
      
    </p>
    <p>
      <font color="#00ffff">require 'connect.php'; </font>
    </p>
    <p>
      
    </p>
    <p>
      <font color="#00ffff">if ($result = $db-&gt;query(&quot;SELECT test_text FROM test_table&quot;)) { </font>
    </p>
    <p>
      
    </p>
    <p>
      <font color="#00ffff">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;while($obj = $result-&gt;fetch_object()){ </font>
    </p>
    <p>
      <font color="#00ffff">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;echo $obj-&gt;test_text; </font>
    </p>
    <p>
      <font color="#00ffff">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;} </font>
    </p>
    <p>
      
    </p>
    <p>
      <font color="#00ffff">&#xa0;&#xa0;&#xa0;&#xa0;$result-&gt;close(); </font>
    </p>
    <p>
      <font color="#00ffff">}</font>
    </p>
  </body>
</html>
</richcontent>
</node>
</node>
</node>
<node TEXT="Переходим по адресу:" FOLDED="true" POSITION="bottom_or_right" ID="ID_1983821773" CREATED="1681559690801" MODIFIED="1681559698706">
<node TEXT="http://IP-адрес Вашего сервера/select_from_table_test.php" FOLDED="true" ID="ID_787231225" CREATED="1681559698712" MODIFIED="1681559701146">
<node TEXT="И если там как на картинке ниже, то все работает:" FOLDED="true" ID="ID_1920795000" CREATED="1681559740216" MODIFIED="1681559743660">
<node TEXT="https://dnevnik.dev/wp-content/uploads/2020/12/image-3.png" ID="ID_1888909508" CREATED="1681559745416" MODIFIED="1681559762642" LINK="https://dnevnik.dev/wp-content/uploads/2020/12/image-3.png"/>
</node>
</node>
</node>
</node>
</node>
</node>
<node TEXT="Изменить группу, ползователя и права на каталог, файл" FOLDED="true" POSITION="top_or_left" ID="ID_1126447431" CREATED="1682448088906" MODIFIED="1682448147841">
<node POSITION="top_or_left" ID="ID_902218033" CREATED="1681649774754" MODIFIED="1681672348893"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      2) Изменить владельца каталога веб-сайта на<font color="#00ffff">&#xa0;www-data:</font>
    </p>
  </body>
</html>
</richcontent>
<node POSITION="top_or_left" ID="ID_1242101396" CREATED="1681649745820" MODIFIED="1681650315362"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      <font size="4">chown -R www-data:www-data /var/www/html/website</font>
    </p>
  </body>
</html>
</richcontent>
</node>
</node>
<node TEXT="2) Можно использовать переменную среды «$USER» для установки владельца созданного каталога.&#xa;Указанная команда установит текущего вошедшего в систему пользователя в качестве своего владельца:" POSITION="top_or_left" ID="ID_1470442482" CREATED="1681672298226" MODIFIED="1681672382602">
<node TEXT=" chown -R $USER:$USER /var/www/html/example.com" ID="ID_1811947514" CREATED="1681672386583" MODIFIED="1681672464160"/>
</node>
<node TEXT="3) Установите права доступа к файлам" POSITION="top_or_left" ID="ID_551650937" CREATED="1681672642758" MODIFIED="1681672654350">
<node TEXT="chmod -R 755 /var/www/html/website" ID="ID_1194530029" CREATED="1681672656019" MODIFIED="1681672708688"/>
</node>
</node>
</node>
</map>
